print("Hello world")
2+2
plot(cars)
nobs = 1000
beta0 = beta1 = beta2 = 1
z = rnorm(nobs, mean = 0, sd = 1)
eps = rnorm(nobs, mean = 0, sd = 1)
x1 = 0.5*z + 0.5*eps
x2 = rnorm(nobs, mean = 0, sd = 1)
y = beta0 + beta1*x1 + beta2*x2 + eps
# Import libraries
library(tidyverse)
install.packages("tidyverse")
# Import libraries
library(tidyverse)
# Read data
df = read.csv('ae98.csv')
setwd("C:/Users/miker/Documents/Projects/STRT6601/problem_set_1")
# Read data
df = read.csv('ae98.csv')
summary_stats = summarise(df)
View(summary_stats)
View(summary_stats)
summary_stats = df %>%
summarise_all(list(
n = ~sum(!is.na(.)),
mean = ~mean(., na.rm = TRUE),
sd = ~sd(., na.rm = TRUE),
min = ~min(., na.rm = TRUE),
max = ~max(., na.rm = TRUE)
))
View(summary_stats)
# Create table with summary stats
summary_stats = df %>%
summarise_all(list(
n = ~sum(!is.na(.)),
mean = ~mean(., na.rm = TRUE),
sd = ~sd(., na.rm = TRUE),
min = ~min(., na.rm = TRUE),
max = ~max(., na.rm = TRUE)
)) %>%
pivot_longer(everything(),
names_to = c("variable", "stat"),
names_pattern = "(.*)_(.*)") %>%
pivot_wider(names_from = stat, values_from = value) %>%
mutate(across(where(is.numeric), ~round(., 4)))
View(summary_stats)
summary_stats = df %>%
summarise_all(list(
n = ~sum(!is.na(.)),
mean = ~mean(., na.rm = TRUE),
sd = ~sd(., na.rm = TRUE),
min = ~min(., na.rm = TRUE),
max = ~max(., na.rm = TRUE)
)) %>%
pivot_longer(everything(), # Move columns to rows
names_to = c("variable", "stat"),
names_pattern = "(.*)_(.*)")
View(summary_stats)
summary_stats = df %>%
summarise_all(list(
n = ~sum(!is.na(.)),
mean = ~mean(., na.rm = TRUE),
sd = ~sd(., na.rm = TRUE),
min = ~min(., na.rm = TRUE),
max = ~max(., na.rm = TRUE)
)) %>%
pivot_longer(everything(), # Move columns to rows
names_to = c("variable", "stat"), # Split variable and stat
names_pattern = "(.*)_(.*)") %>%
pivot_wider(names_from = stat, values_from = value) %>% # Move stat to columns
mutate(across(where(is.numeric), ~round(., 4))) # Rounding
View(summary_stats)
binary_vars = c("momworked", "morekids", "moreths", "blackm", "hispm", "whitem", "samesex", "twins2")
binary_summary = df %>%
select(all_of(binary_vars)) %>%
summarise(across(everything(),
list(Proportion = ~mean(., na.rm = TRUE),
Count_1 = ~sum(. == 1, na.rm = TRUE),
Count_0 = ~sum(. == 1, na.rm = TRUE),
N = ~sum(!is.na(.))),
.names = "{.col}_{.fn}")) %>%
pivot_longer(everything(),
names_to = c("Variable", "Statistic"),
names_sep = "_") %>%
pivot_wider(names_from = Statistic, values_from = value)
binary_summary = df %>%
select(all_of(binary_vars)) %>%
summarise(across(everything(),
list(Proportion = ~mean(., na.rm = TRUE),
Count_1 = ~sum(. == 1, na.rm = TRUE),
Count_0 = ~sum(. == 1, na.rm = TRUE),
N = ~sum(!is.na(.))),
.names = "{.col}_{.fn}")) %>%
pivot_longer(everything(),
names_to = c("Variable", "Statistic"),
names_sep = "_") %>%
pivot_wider(names_from = Statistic, values_from = value)
binary_vars = c("momworked", "morekids", "moreths", "blackm", "hispm", "whitem", "samesex", "twins2")
binary_summary = df %>%
select(all_of(binary_vars)) %>%
summarise(across(everything(),
list(Proportion = ~mean(., na.rm = TRUE),
Count_1 = ~sum(. == 1, na.rm = TRUE),
Count_0 = ~sum(. == 1, na.rm = TRUE),
N = ~sum(!is.na(.))),
.names = "{.col}_{.fn}")) %>%
pivot_longer(everything(),
names_to = c("Variable", "Statistic"),
names_sep = "_") %>%
pivot_wider(names_from = Statistic, values_from = value)
View(binary_summary)
View(binary_summary)
binary_summary = df %>%
select(all_of(binary_vars))
View(binary_summary)
binary_summary = df %>%
select(all_of(binary_vars)) %>%
summarise(across(everything(),
Count = sum(.)))
binary_summary = df %>%
select(all_of(binary_vars)) %>%
group_by()
View(binary_summary)
View(binary_summary)
binary_summary = df %>%
select(binary_vars)
binary_summary = df %>%
select('momworked')
View(binary_summary)
binary_summary = df %>%
select(binary_vars)
View(binary_summary)
binary_summary = df %>%
select(binary_vars) %>%
summarize_all(mean, na.rm = TRUE) %>%
pivot_longer(everything(), names_to = "Variable", values_to = "Proportion")
View(binary_summary)
binary_summary = df %>%
select(binary_vars) %>%
summarize_all(mean, na.rm = TRUE) %>%
pivot_longer(everything(), names_to = "Variable", values_to = "Proportion_%") %>%
mutate('Variable' = round('Variable',2) * 100)
binary_summary = df %>%
select(binary_vars) %>%
summarize_all(mean, na.rm = TRUE) %>%
pivot_longer(everything(), names_to = "Variable", values_to = "Proportion_%") %>%
mutate(Variable = round(Variable,2) * 100)
binary_summary = df %>%
select(binary_vars) %>%
summarize_all(mean, na.rm = TRUE) %>%
pivot_longer(everything(), names_to = "Variable", values_to = "Proportion_%") %>%
mutate(Variable = Variable * 100)
binary_summary = df %>%
select(binary_vars) %>%
summarize_all(mean, na.rm = TRUE) %>%
pivot_longer(everything(), names_to = "Variable", values_to = "Proportion_%") %>%
mutate(Variable = Variable * 100)
binary_summary = df %>%
select(binary_vars) %>%
summarize_all(mean, na.rm = TRUE) %>%
pivot_longer(everything(), names_to = "Variable", values_to = "Proportion") %>%
mutate(Variable = round(Variable,2) * 100)
binary_summary = df %>%
select(binary_vars) %>%
summarize_all(mean, na.rm = TRUE) %>%
pivot_longer(everything(), names_to = "Variable", values_to = "Proportion") %>%
mutate(Proportion = round(Proportion, 2) * 100)
View(binary_summary)
# Import libraries
library(tidyverse)
# Read data
df = read.csv('ae98.csv')
# Create table with summary stats
summary_stats = df %>%
summarise_all(list(
n = ~sum(!is.na(.)),
mean = ~mean(., na.rm = TRUE),
sd = ~sd(., na.rm = TRUE),
min = ~min(., na.rm = TRUE),
max = ~max(., na.rm = TRUE)
)) %>%
pivot_longer(everything(), # Move columns to rows
names_to = c("variable", "stat"), # Split variable and stat
names_pattern = "(.*)_(.*)") %>%
pivot_wider(names_from = stat, values_from = value) %>% # Move stat to columns
mutate(across(where(is.numeric), ~round(., 4))) # Rounding
summary_stats
# Create table with summary stats
summary_stats = df %>%
summarise_all(list(
n = ~sum(!is.na(.)),
mean = ~mean(., na.rm = TRUE),
sd = ~sd(., na.rm = TRUE),
min = ~min(., na.rm = TRUE),
max = ~max(., na.rm = TRUE)
)) %>%
pivot_longer(everything(), # Move columns to rows
names_to = c("variable", "stat"), # Split variable and stat
names_pattern = "(.*)_(.*)") %>%
pivot_wider(names_from = stat, values_from = value) %>% # Move stat to columns
mutate(across(where(is.numeric), ~round(., 2))) # Rounding
summary_stats
# Create table with proportions for binary data
binary_vars = c("momworked", "morekids", "moreths", "blackm", "hispm", "whitem", "samesex", "twins2")
binary_summary = df %>%
select(binary_vars) %>%
summarize_all(mean, na.rm = TRUE) %>%
pivot_longer(everything(), names_to = "Variable", values_to = "Proportion") %>%
mutate(Proportion = round(Proportion, 2) * 100)
# Create table with proportions for binary data
binary_vars = c("momworked", "morekids", "moreths", "blackm", "hispm", "whitem", "samesex", "twins2")
binary_summary = df %>%
select(binary_vars) %>%
summarize_all(mean, na.rm = TRUE) %>%
pivot_longer(everything(), names_to = "Variable", values_to = "Proportion") %>%
mutate(Proportion = round(Proportion, 2) * 100)
binary_summary
# Create table with proportions for binary data
binary_vars = c("momworked", "morekids", "moreths", "blackm", "hispm", "whitem", "samesex", "twins2")
binary_summary = df %>%
select(binary_vars) %>%
summarize_all(mean, na.rm = TRUE) %>%
pivot_longer(everything(), names_to = "Variable", values_to = "Proportion") %>%
mutate(Proportion = round(Proportion, 2) * 100)
binary_summary
# Create table with proportions for binary data
binary_vars = c("momworked", "morekids", "moreths", "blackm", "hispm", "whitem", "samesex", "twins2")
binary_summary = df %>%
select(binary_vars) %>%
summarize_all(mean, na.rm = TRUE) %>%
pivot_longer(everything(), names_to = "Variable", values_to = "Proportion") %>%
mutate(Proportion = round(Proportion, 2) * 100)
binary_summary
# Import libraries
library(tidyverse)
# Read data
df = read.csv('ae98.csv')
# Create table with summary stats
summary_stats = df %>%
summarise_all(list(
n = ~sum(!is.na(.)),
mean = ~mean(., na.rm = TRUE),
sd = ~sd(., na.rm = TRUE),
min = ~min(., na.rm = TRUE),
max = ~max(., na.rm = TRUE)
)) %>%
pivot_longer(everything(), # Move columns to rows
names_to = c("variable", "stat"), # Split variable and stat
names_pattern = "(.*)_(.*)") %>%
pivot_wider(names_from = stat, values_from = value) %>% # Move stat to columns
mutate(across(where(is.numeric), ~round(., 2))) # Rounding
summary_stats
# Create table with proportions for binary data
binary_vars = c("momworked", "morekids", "moreths", "blackm", "hispm", "whitem", "samesex", "twins2")
binary_summary = df %>%
select(binary_vars) %>%
summarize_all(mean, na.rm = TRUE) %>%
pivot_longer(everything(), names_to = "Variable", values_to = "Proportion") %>%
mutate(Proportion = round(Proportion, 2) * 100)
binary_summary
ols_model = lm(momworked ~ morekids + moreths + blackm + hispm + whitem)
View(df)
View(binary_summary)
setwd("C:/Users/miker/Documents/Projects/STRT6601/problem_set_1")
# Import libraries
library(tidyverse)
# Read data
df = read.csv('ae98.csv')
# Create table with summary stats
summary_stats = df %>%
summarise_all(list(
n = ~sum(!is.na(.)),
mean = ~mean(., na.rm = TRUE),
sd = ~sd(., na.rm = TRUE),
min = ~min(., na.rm = TRUE),
max = ~max(., na.rm = TRUE)
)) %>%
pivot_longer(everything(), # Move columns to rows
names_to = c("variable", "stat"), # Split variable and stat
names_pattern = "(.*)_(.*)") %>%
pivot_wider(names_from = stat, values_from = value) %>% # Move stat to columns
mutate(across(where(is.numeric), ~round(., 2))) # Rounding
summary_stats
# Create table with proportions for binary data
binary_vars = c("momworked", "morekids", "moreths", "blackm", "hispm", "whitem", "samesex", "twins2")
binary_summary = df %>%
select(binary_vars) %>%
summarize_all(mean, na.rm = TRUE) %>%
pivot_longer(everything(), names_to = "Variable", values_to = "Proportion") %>%
mutate(Proportion = round(Proportion, 2) * 100)
binary_summary
ols_model = lm(momworked ~ morekids + moreths + blackm + hispm + whitem)
ols_model = lm(momworked ~ morekids + moreths + blackm + hispm + whitem, data = df)
summary(ols_model)
ols_coef = coef(ols_model)['morekids']
summary(ols_model)$coefficients
summary(ols_model)$coefficients['Estimate', 'Std. Error']
summary(ols_model)$coefficients
round(summary(ols_model)$coefficients,2)
ols_model %>%
tidy() %>%
select(term, estimate, std.error) %>%
mutate(across(where(is.numeric), ~ round(., 2)))
tidy(ols_model) %>%
select(term, estimate, std.error) %>%
mutate(across(where(is.numeric), ~ round(., 2)))
# Import libraries
library(tidyverse)
library(broom)
# Read data
df = read.csv('ae98.csv')
ols_model %>%
tidy() %>%
select(term, estimate, std.error) %>%
mutate(across(where(is.numeric), ~ round(., 2)))
ols_model %>%
tidy() %>%
select(term, estimate, std.error) %>%
mutate(across(where(is.numeric), ~ round(., 2)))
first_stage = lm(morekids ~ samesex + moreths + blackm + hism + whitem, data = df)
first_stage = lm(morekids ~ samesex + moreths + blackm + hispm + whitem, data = df)
summary(first_stage)
first_stage %>%
tidy() %>%
select(term, estimate, std.error) %>%
mutate(across(where(is.numeric), ~ round(., 2)))
ols_model %>%
tidy() %>%
select(term, estimate, std.error) %>%
mutate(across(where(is.numeric), ~ round(., 2)))
first_stage = lm(morekids ~ samesex + moreths + blackm + hispm + whitem, data = df)
summary(first_stage)
# Extract and evaluate instrument strength
summary(first_stage)$coefficients['samesex', 't value'] ^ 2
# Extract and evaluate instrument strength
samesex_fstat = summary(first_stage)$coefficients['samesex', 't value'] ^ 2
cat("F-statistic: ", samesex_fstat)
# Extract and evaluate instrument strength
samesex_fstat = summary(first_stage)$coefficients['samesex', 't value'] ^ 2
cat("F-statistic: ", samesex_fstat)
# Extract and evaluate instrument strength
samesex_fstat = summary(first_stage)$coefficients['samesex', 't value'] ^ 2
cat("F-statistic: ", samesex_fstat)
install.packages("ivreg")
library(ivreg)
second_stage = ivreg(momworked ~ morekids + moreths + blackm + hispm + whitem | samesex + moreths + blackm + hispm + whitem, data = df)
summary(second_stage)
second_stage %>%
tidy() %>%
select(term, estimate, std.error) %>%
mutate(across(where(is.numeric), ~ round(., 2)))
iv_twins2 <- ivreg(momworked ~ morekids + moreths + blackm + hispm + whitem |
twins2 + moreths + blackm + hispm + whitem,
data = df)
iv_twins2 <- ivreg(momworked ~ morekids + moreths + blackm + hispm + whitem |
twins2 + moreths + blackm + hispm + whitem,
data = df)
summary(iv_twins2)
iv_both = ivreg(momworked ~ morekids + moreths + blackm + hispm + whitem |
samesex + twins2 + moreths + blackm + hispm + whitem,
data = df)
iv_both = ivreg(momworked ~ morekids + moreths + blackm + hispm + whitem |
samesex + twins2 + moreths + blackm + hispm + whitem,
data = df)
summary(iv_both)
